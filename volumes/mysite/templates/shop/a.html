{% extends "base.html" %}

{% block content %}
<br>

{% if messages %}
<ul class="messages">
  {% for message in messages %}
    <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
  {% endfor %}
</ul>
{% endif %}

   <div class="container">
        <div class="row mt-5">
            <div class="col-md-6 col-sm-12  mb-3 mb-sm-0">
                <div class="card mb-3" style="background-color: ;">
                    <div class="card-body">
                        <!-- <img id="third-card-img" src="img/2.png" class="card-img-top"> -->
                        <!-- <button class="">example</button> -->
                        <div id="carouselExampleCaptions" class="carousel slide">
                            <div class="carousel-indicators">
                              <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                              <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="1" aria-label="Slide 2"></button>
                              <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="2" aria-label="Slide 3"></button>
                            </div>
                            <div class="carousel-inner">
                            {% for i in object.image %}
                              <div class="carousel-item active">
                                <img id="img-2" src="{{i.image.url}}" class="d-block w-75 center conter.center" alt="...">
                                <div class="carousel-caption d-none d-md-block">

                                </div>
                              </div>
                              {% endfor %}
                            </div>
                            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="prev">
                              <span class="carousel-control-prev-icon" style="background-color: black;" aria-hidden="true"></span>
                              <span class="visually-hidden">Previous</span>
                            </button>
                            <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="next">
                              <span class="carousel-control-next-icon" style="background-color: black;" aria-hidden="true"></span>
                              <span class="visually-hidden">Next</span>
                            </button>
                          </div>
                    </div>
                  </div>
            </div>
            <div class="col-md-3 col-sm-12 mb-3 mb-sm-0">
                <div class="card" style="background-color: #ffffff; border:none;">
                    <div class="card-body">
                      
                      <p>
                        {{object.detail.title}}
                      </p>
                      {% for key,value in object.detail.data.items %}
                      <p>
                        {{key}} {{value}}
                        
                      </p>
                      {% endfor %}
                      <!-- <p>
                        سایز 6.7 اینچ
                      </p>
                        <p>رنگ مشکی</p>
                        <p>
                         -->
                          قیمت {{object.detail.price}} ریال
                        </p>
                        <form action="{% url 'cart:add' object.detail.id %}" method="post">
                        {% csrf_token %}
                          <label for="contnet">تعداد:</label><br>
                           <input type="number" id="quantity" name="quantity" value="1" data-value="1" max="10"><br><br>
                        <button type="submit" class="btn btn-success" style="background-color:#633EF8;">
                          اضافه کردن به سبد
                        </button>
                        </form>

                    </div>
                  </div>


            </div>
            <div class="col-md-3 col-sm-12 mb-3 mb-sm-0">
              <div class="card mb-3" style="background-color: #ffffff;">
                <div class="card-body text-center">
                  <p>برچسب رضایت</p>
                  <p>محدوده قیمت بازار برای این جنس</p>
                  <p>تهران: 13,300,000 ریال </p>
                  <p>میزان رضایت شما از قیمت</p>   
                  <p>تعداد رای: 1200</p>
                  <p>ایا از قیمت کالا رضایت دارید؟</p>    
                  <button type="button" class="btn" style="background-color:#633EF8; color: white;">بله</button>         
                  <button type="button" class="btn" style="background-color:#c53151; color: white;">خیر</button>
                  </div>
                  </div>
            </div>
        </div>
    </div>

    <!-- information about product -->
    <div class="container">
      <div class="row">
        <div class="col-12">
          <div class="card">
            <div class="card-body">
              <h3 class="text-center">
                {{object.detail.title}}
              </h3>
              <p>
              {{object.detail.description}}
              </p>
        
              <img id="img-2" src="{{object.detail.image.url}}" class="d-block w-25 center conter.center" alt="...">

            </div>
          </div>
        </div>
      </div>
    </div>




    <!-- commnet -->
    <div class="container">
      <div class="row">
        <div class="col-12">
          <div class="card p-5">


        
      <h1 class="text-center mt-4">ثبت نظرات و پیشنهادات</h1>

  <form action="{% url 'comment:create-comment' object.detail.id %}" method="POST">
    {% csrf_token %}
      <div class="mb-3">
        <label for="contnet" id="content" name="content" class="form-label">متن</label>
        <input type="text" class="form-control" id="contnet" name="content">
      </div>
      <button type="submit" class="btn btn-primary">ثبت</button>
    </form>





    <div class="row">
      {% if object.comment == "کامنتی وجود ندارد" %}
      <h3 class="text-center">کامنتی نیست</h3>
      {% else %}
      {% for i in object.comment %}
    <div class="col-lg-4 col-sm-6 mb-3 mb-sm-0">
      <div class="card mt-3">
        
          <!-- <img id="top-card-img" src="img/b.jpg" class="card-img-top" alt="..."> -->
          <div class="card-body">
              <p class="text-muted text-center">جواد حسین زاده</p>
              <p class="text-center">{{i.content}}</p>

          </div>
      </div>
  </div>
    {% endfor %}
    {% endif %}
  </div>
</div>
        </div>

      </div>
    </div>
  </div>


  


    <!-- text about product -->



    <!-- products -->
    <div class="container mt-5">
      <div class="row">
      {% for product in object.product %}
      
          <div class="col-lg-3 col-md-6 col-sm-6 mb-3 mb-sm-0">
            <a href="{% url "shop:detail" product.id %}" style="text-decoration: none;">

              <div id="top-card" class="card" >
                  <img id="top-card-img" src="{{product.image.url}}" class="card-img-top" alt="...">
                  <div class="card-body">
                    <p>{{product.title}}</p>
                    
                    <p class="text-muted text-center">{{product.calculate_discount}}&nbsp;&nbsp;<span style="color: #c53151; text-decoration:line-through;">{{product.price}}</span></p>
                  </div>
              </div>
              </a>
          </div>
      {% endfor %}
      </div>
  </div>


      <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>
    -->


    

{% endblock %}






 {% extends 'base.html' %} 
 {% load static %}
 {% load currency %}

ط
 {% block content %}
        <!-- Start main-content -->
        <main class="main-content dt-sl mb-3">
            <div class="container main-container">
                <!-- Start title - breadcrumb -->
                <div class="title-breadcrumb-special dt-sl mb-3">
                    <div class="breadcrumb dt-sl">
                        <nav>
                            <a href="#">{{product.category.title}}</a>
                            <a href="#">{{product.title}}</a>
                        </nav>
                    </div>
                </div>
                <!-- End title - breadcrumb -->
                <!-- Start Product -->
                <div class="dt-sn mb-5 dt-sl">
                    <div class="row">
                        <!-- Product Gallery-->
                        <div class="col-lg-4 col-md-6 ps-relative">
                            <!-- Product Options-->
                            <ul class="gallery-options">
                                <li>
                                    <button class="add-favorites"><i class="mdi mdi-heart"></i></button>
                                    <span class="tooltip-option">افزودن به علاقمندی</span>
                                </li>
                            </ul>
                            <div class="product-timeout position-relative pt-5 mb-3">


         
                            </div>
                            <div class="product-gallery">
                                <div class="product-carousel owl-carousel" data-slider-id="1">

                                {% for i in images %}

                                    <div class="item">
                                        <a class="gallery-item" href="./assets/img/single-product/thumbnail-1.jpg"
                                            data-fancybox="gallery1">
                                            <img src="{{i.image.url}}" alt="Product">
                                        </a>
                                    </div>
                                    {% endfor %}
                                </div>
                                <div class="d-flex justify-content-center flex-wrap">
                                    <ul class="product-thumbnails owl-thumbs ml-2" data-slider-id="1">
                                        {% for i in images %}
                                        <li class="owl-thumb-item active">
                                            <a href="">
                                                <img src="{{i.image.url}}" alt="Product">
                                            </a>
                                        </li>
                                       {% endfor %}
                                    </ul>
                                    <ul class="product-thumbnails">
                                        <li>
                                            <a class="navi-link text-sm" href="./assets/video/download.mp4"
                                                data-fancybox data-width="960" data-height="640">
                                                <i class="mdi mdi-video text-lg d-block mb-1"></i>
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <!-- Product Info -->
                        <div class="col-lg-8 col-md-6 py-2">
                            <div class="product-info dt-sl">
                                <div class="product-title dt-sl">
                                    <h1>{{product.title}}
                                    </h1>
                                </div>

 
                        <br>
                                <div class="product-params dt-sl">
                                    <ul data-title="ویژگی‌های محصول">
                                        <li>
                                            <span>حافظه داخلی: </span>
                                            <span> 256 گیگابایت </span>
                                        </li>
                                        <li>
                                            <span>شبکه های ارتباطی: </span>
                                            <span> 2G,3G,4G </span>
                                        </li>
                                        <li>
                                            <span>رزولوشن عکس: </span>
                                            <span> 12.0 مگاپیکسل</span>
                                        </li>
                                        <li>
                                            <span>تعداد سیم کارت: </span>
                                            <span> تک </span>
                                        </li>
                                        <li>
                                            <span>ویژگی‌های خاص: </span>
                                            <span> مقاوم در برابر آب
                                                مناسب عکاسی
                                                مناسب عکاسی سلفی
                                                مناسب بازی
                                                مجهز به حس‌گر تشخیص چهره
                                            </span>
                                        </li>
                                    </ul>
                                    <div class="sum-more">
                                        <span class="show-more btn-link-border">
                                            + موارد بیشتر
                                        </span>
                                        <span class="show-less btn-link-border">
                                            - بستن
                                        </span>
                                    </div>
                                </div>
                                <div class="section-title text-sm-title title-wide no-after-title-wide mb-0 dt-sl">
                                    <h2>کد محصول:{{product.id}}</h2>
                                </div>
                                <div class="section-title text-sm-title title-wide no-after-title-wide mb-0 dt-sl">
                                    <h2>قیمت : <span class="price">{{variant.Discounts}} تومان</span> </h2>
                                </div>
                                        {% for i in variants %}
                                        <a href="#">
                                         <li class="ui-variant">
                                            <label class="ui-variant ui-variant--color" >
                                                <span class="ui-variant-shape" style="background-color": {{ rs.color.code }}></span>
                                                <input type="radio"  value="{{ i.color.name }}" name="color" id="color" class="variant-selector">
                                                <span class="ui-variant--check">{{i.color.name}}</span>
                                            </label>
                                        </li>
                                    </a>
                                        {% endfor %}
                                <!---FORM --->
                                                     <div class="product-btns">
                                <div class="row">
                                    {% if product.variant == 'Size-Color' %}

                                        <div class="product-options" >
                                            <div class="size-option">
                                                <form method="POST" id="post-form">
                                                    <input type="hidden" name="productid" id="productid" value="{{ product.id }}">
                                                    <span style="margin-right:20px;" class="text-uppercase">اندازه :</span>
                                                    {% csrf_token %}
                                                    <div class="section-title text-sm-title title-wide no-after-title-wide mb-0 dt-sl">
                                        <li>
                                                    <select name="size" id="size" style="width: 100px; height:30px; text-align: center; border-radius: 7px; margin-bottom: 8px;" >
                                                        {% for rs in sizes %}  
                                                            <option {% if variant.size_id == rs.size_id %} selected {% endif %} value="{{ rs.size_id }}">{{ rs.size.name }}</option>
                                                        {% endfor %}
                                                    </select>
                                                </li>
                                                </form>
                                            </div>

                                            <form method="post" action="?q=selectvariant" id="post-color">
                                                {% csrf_token %}
                                                <div id="appendHere">
                                                    <input type="hidden" name="size" id="size" value="{{ size_id }}">
                                                    <ul class="color-option" >
                                                        <li><span class="text-uppercase"></span></li>
                                                        {% for rs in colors %}

                                                            <input type="radio"  {% if variant.id == rs.id %} checked {% endif %} name="variantid" id="variantid" value="{{ rs.id }}" onchange="this.form.submit();">
                                                        <li class="ui-variant">
                                                            <label class="ui-variant ui-variant--color">
                                                                <span class="ui-variant-shape" style="background-color: {{ rs.color.code }}"></span>
                                                                    <input type="radio"{% if variant.id == rs.id %} checked {% endif %} name="variantid" id="variantid" value="{{ rs.id }}" onchange="this.form.submit();">

                                                                <span class="ui-variant--check">{{ rs.color.name }}</span>
                                                            </label>
                                                        </li>
                                                            </li>
                                                        {% endfor %}
                                                    </ul>
                                                </div>
                                            </form>
                                        </div>


                                    {% elif product.variant == 'Size' %}
                                        <form method="post" action="?q=selectvariant" id="post-color">
                                            {% csrf_token %}
                                            <div id="appendHere">
                                                <input type="hidden" name="size" id="size" value="{{ size_id }}">
                                                <ul class="color-option" >
                                                    <li><span class="text-uppercase">Size:</span></li>
                                                    {% for rs in sizes %}
                                                        <input type="radio"  {% if variant.id == rs.id %} checked {% endif %} name="variantid" id="variantid" value="{{ rs.id }}" onchange="this.form.submit();">
                                                        <li  {% if variant.id == rs.id %} class="active" {% endif %}>
                                                            <a style=" color: #204d74;  width: 90px">
                                                                ${{ rs.size }}<br> {{ rs.price|currency:request.session.currency }} {{ request.session.currency }}
                                                            </a>
                                                        </li>
                                                    {% endfor %}
                                                </ul>
                                            </div>
                                        </form>
                                        <br><br>

                                    {% elif product.variant == 'Color' %}
                                        <form method="post" action="?q=selectvariant" id="post-color">
                                            {% csrf_token %}
                                            <div id="appendHere">
                                                <input type="hidden" name="size" id="size" value="{{ size_id }}">
                                                   <ul class="color-option" >
                                                        <li><span class="text-uppercase"></span></li>
                                                        {% for rs in colors %}

                                                            <input type="radio"  {% if variant.id == rs.id %} checked {% endif %} name="variantid" id="variantid" value="{{ rs.id }}" onchange="this.form.submit();">
                                                        <li class="ui-variant">
                                                            <label class="ui-variant ui-variant--color">
                                                                <span class="ui-variant-shape" style="background-color: {{ rs.color.code }}"></span>
                                                                    <input type="radio"{% if variant.id == rs.id %} checked {% endif %} name="variantid" id="variantid" value="{{ rs.id }}" onchange="this.form.submit();">

                                                                <span class="ui-variant--check">{{rs.color.name}}</span>
                                                            </label>
                                                        </li>
                                                            </li>
                                                        {% endfor %}
                                                    </ul>
                                                </div>
                                        </form>
                                        </div>
                                    {% endif %}

                            {% if  product.variant != 'None'   %}
                                <form action="/order/addtoshopcart/{{ product.id }}" method="post"  id="addchart-form">
                                    {% csrf_token %}
                                    <input type="hidden" name="variantid" id="variantid" value="{{ variant.id }}">
                                    <div id="SelectedProduct">

                                        <h3 class="product-price"></h3>
                                         <div class="product-params dt-sl">
                                    <ul data-title="ویژگی‌های محصول">
                                        <li>
                                         <span class="text-uppercase">تعداد: </span>
                                            <input class="input" name="quantity" type="number" value="1" min="1" max="{{ variant.quantity }}">

                                        </li>
                                    </ul>
                                        <div class="qty-input">

                                        <button  type="submit" {% if variant.quantity < 1  %} disabled {% endif %} class="btn-primary-cm btn-with-icon">
                                        <img src="{% static 'assets/img/theme/shopping-cart.png' %}" alt="">
                                        افزودن به سبد خرید
                                    </button>
                                        </div>
                                    </div>
                                </div>
                                </form>
                            {% else %}

                                <form action="/order/addtoshopcart/{{ product.id }}" method="post"  id="addchart-form">
                                    {% csrf_token %}
                                    <div id="SelectedProduct">
                                        <p><strong>Availability:</strong> {% if product.amount > 0  %} In Stock {% else %} Out of Stock {% endif %}</p>
                                        <h3 class="product-price">{{ product.price|currency:request.session.currency }} {{ request.session.currency }}</h3>
                                        <div class="qty-input">
                                            <span class="text-uppercase">تعداد: </span>
                                            <input class="input" name="quantity" type="number" value="1" min="1" max="{{ product.amount }}">
                                            <div class="dt-sl mt-4">
                                    <button class="btn-primary-cm btn-with-icon" type="submit" {% if product.amount < 1  %} disabled {% endif %}>
                                        <img src="{% static 'assets/img/theme/shopping-cart.png' %}" alt="">
                                        افزودن به سبد خرید
                                    </button>
                                    </div>
                                        </div>
                                    </div>
                                </form>
                            {% endif %}
                        </div>
                            </div>
                        </div>
                    </div>
                    <div class="mb-add-to-cart-btn-wrapper">
                        <a href="#" class="mb-add-to-cart-btn">افزودن به سبد خرید</a>
                    </div>
                </div>
                <div class="dt-sn mb-5 px-0 dt-sl pt-0">
                    <!-- Start tabs -->
                    <section class="tabs-product-info mb-3 dt-sl">
                        <div class="ah-tab-wrapper border-bottom dt-sl">
                            <div class="ah-tab dt-sl">
                                <a class="ah-tab-item" data-ah-tab-active="true" href=""><i
                                        class="mdi mdi-glasses"></i>نقد و بررسی</a>
                                <a class="ah-tab-item" href=""><i class="mdi mdi-format-list-checks"></i>مشخصات</a>
                                <a class="ah-tab-item" href=""><i
                                        class="mdi mdi-comment-text-multiple-outline"></i>نظرات کاربران</a>
                                <a class="ah-tab-item" href=""><i class="mdi mdi-comment-question-outline"></i>پرسش و
                                    پاسخ</a>
                            </div>
                        </div>
                        <div class="ah-tab-content-wrapper product-info px-4 dt-sl">
                            <div class="ah-tab-content dt-sl" data-ah-tab-active="true">
                                <div class="section-title text-sm-title title-wide no-after-title-wide mb-0 dt-sl">
                                    <h2>نقد و بررسی</h2>
                                </div>
                                <div class="product-title dt-sl">
                                    <h1>{{product.title}}
                                    </h1>
                                </div>
                                <div class="description-product dt-sl mt-3 mb-3">
                                    <div class="container">
                                        <p>{{product.description_moarefi|truncatewords:10}}</p>
                                    </div>
                                </div>
                                <div class="accordion dt-sl accordion-product" id="accordionExample">

                           <div class="card">
                                        <div class="card-header" id="headingThree">
                                            <h5 class="mb-0">
                                                <button class="btn collapsed" type="button" data-toggle="collapse"
                                                    data-target="#collapseThree" aria-expanded="false"
                                                    aria-controls="collapseThree">
                                                    معرفی بیشتر
                                                </button>
                                            </h5>
                                        </div>
                                        <div id="collapseThree" class="collapse" aria-labelledby="headingThree"
                                            data-parent="#accordionExample">
                                            <div class="card-body">
                                                <img src={{product.img_moarefi.url}} alt="">
                                                <p>
                                                    {{product.description_moarefi}}
                                                </p>
                                                

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="ah-tab-content params dt-sl">
                                <div class="section-title text-sm-title title-wide no-after-title-wide mb-0 dt-sl">
                                    <h2>مشخصات فنی</h2>
                                </div>
                                <div class="product-title dt-sl mb-3">
                                    <h1>گوشی موبایل سامسونگ مدل Galaxy A50 SM-A505F/DS دو سیم کارت ظرفیت 128گیگابایت
                                    </h1>
                                    <h3>Samsung Galaxy A50 SM-A505F/DS Dual SIM 128GB Mobile Phone</h3>
                                </div>
                                <section>
                                    
                                    <h3 class="params-title">مشخصات کلی</h3>
                                    
                                    <ul class="params-list">

                                        {% for i, x in product.data.items %}
                                        <li>
                                            <div class="params-list-key">
                                                <span class="d-block">{{i}}</span>
                                            </div>
                                            
                                            <div class="params-list-value">
                                                <span class="d-block">
                                                    {{x}}
                                                </span>
                                            </div>
                                    {% endfor %}
 
                                    </ul>
                                </section>
                            </div>
                            <div class="ah-tab-content comments-tab dt-sl">
                                <div class="section-title title-wide no-after-title-wide mb-0 dt-sl">
                                    <!---inja--->



                        <div class="row comments-add-col--content">
                        <div class="col-md-6 col-sm-12">
                            <div class="form-ui">
                                <form class="review-form" action="/product/addcomment/{{ product.id }}" method="post">
                                {% csrf_token %}

                                    <div class="row">
                                        <div class="col-12">
                                            <div class="form-row-title mb-2">عنوان نظر شما (اجباری)</div>
                                            <div class="form-row">
                                                <input class="input-ui pr-2" type="text" id="subject" name="subject"
                                                    placeholder="عنوان نظر خود را بنویسید">
                                            </div>
                                        </div>
                                        <div class="col-12 mt-5"><br>
                                            <div class="form-row-title mb-2">متن نظر شما (اجباری)</div>
                                            <div class="form-row">
                                                <textarea class="input-ui pr-2 pt-2" rows="5" id="comment" name="comment" id="comment" 
                                                    placeholder="متن خود را بنویسید"></textarea>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="input-rating">
                                                <strong class="text-uppercase">Your Rating: </strong>
                                                <div class="stars">
                                                    <input type="radio" id="star5" name="rate" value="5" /><label for="star5"></label>
                                                    <input type="radio" id="star4" name="rate" value="4" /><label for="star4"></label>
                                                    <input type="radio" id="star3" name="rate" value="3" /><label for="star3"></label>
                                                    <input type="radio" id="star2" name="rate" value="2" /><label for="star2"></label>
                                                    <input type="radio" id="star1" name="rate" value="1" /><label for="star1"></label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-12 mt-2 mb-2 px-0">
                                        {% if user.id is not None %}
                                            <button class="btn btn btn-primary px-3">
                                                ثبت نظر
                                            </button>
                                        {% else %}
                                            You must be logged in to post a review
                                        {% endif %}
                                    </form>
                                        </div>
                                    </div>

                            </div>
                        </div>
                        <div class="col-md-6 col-sm-12">
                            <h3>دیگران را با نوشتن نظرات خود، برای انتخاب این محصول راهنمایی کنید.</h3>
                            <div class="desc-comment">
                                <p>لطفا پیش از ارسال نظر، خلاصه قوانین زیر را مطالعه کنید:</p>
                                <p>فارسی بنویسید و از کیبورد فارسی استفاده کنید. بهتر است از فضای خالی (Space)
                                    بیش‌از‌حدِ معمول، شکلک یا ایموجی استفاده نکنید و از کشیدن حروف یا کلمات با
                                    صفحه‌کلید بپرهیزید.</p>
                                <p>نظرات خود را براساس تجربه و استفاده‌ی عملی و با دقت به نکات فنی ارسال کنید؛
                                    بدون
                                    تعصب به محصول خاص، مزایا و معایب را بازگو کنید و بهتر است از ارسال نظرات
                                    چندکلمه‌‌ای خودداری کنید.</p>
                                <p>بهتر است در نظرات خود از تمرکز روی عناصر متغیر مثل قیمت، پرهیز کنید.</p>
                                <p>به کاربران و سایر اشخاص احترام بگذارید. پیام‌هایی که شامل محتوای توهین‌آمیز و
                                    کلمات نامناسب باشند، حذف می‌شوند.</p>
                                <p>از ارسال لینک‌های سایت‌های دیگر و ارایه‌ی اطلاعات شخصی خودتان مثل شماره تماس،
                                    ایمیل و آی‌دی شبکه‌های اجتماعی پرهیز کنید.</p>
                                <p>با توجه به ساختار بخش نظرات، از پرسیدن سوال یا درخواست راهنمایی در این بخش
                                    خودداری کرده و سوالات خود را در بخش «پرسش و پاسخ» مطرح کنید.</p>
                                <p>هرگونه نقد و نظر در خصوص سایت دیجی‌کالا، خدمات و درخواست کالا را با ایمیل
                                    <a href="mailto:info@digikala.com">
                                        info@digikala.com
                                    </a>
                                    یا با شماره‌ی

                                    <a href="tel: +982161930000">
                                        ۶۱۹۳۰۰۰۰ - ۰۲۱
                                    </a>
                                    در میان بگذارید و از نوشتن آن‌ها در بخش نظرات خودداری کنید.</p>
                            </div>
                        </div>
                    </div>  
                    
                                    <div class="comments-area dt-sl">
                                        <div
                                            class="section-title text-sm-title title-wide no-after-title-wide mb-0 dt-sl">
                                            <h2>نظرات کاربران</h2>
                                        </div>
                                        {% for i in comments %}
                                        <ol class="comment-list">
                                            <!-- #comment-## -->
                                            <li>
                                                <div class="comment-body">
                                                    <div class="row">
                                                        <div class="col-md-3 col-sm-12">
                                                            <div class="message-light message-light--purchased">
                                                                خریدار این محصول</div>

                                               
                                                        </div>
                                                        <div class="col-md-9 col-sm-12 comment-content">
                                                            <div class="comment-title">
                                                                {{product.subject}}
                                                            </div>
                                                            <div class="comment-author">
                                                                {{i.description}}
                                                            </div>

                                                            <p>{{i.comment}}</p>

                                                            <div class="footer">
                                                                <div class="comments-likes">

                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </li>

                                    </ol>
                                    {% endfor %}
                                </div>
                            </div>
                            
                        </div>
                    </section>
                    <!-- End tabs -->
                </div>
                <!-- End Product -->
                <!-- Start Product-Slider -->
                <section class="slider-section dt-sl mb-5">
                    <div class="row mb-3">
                        <div class="col-12">
                            <div class="section-title text-sm-title title-wide no-after-title-wide">
                                <h2>جدید ها</h2>
                                <a href="#">مشاهده همه</a>
                            </div>
                        </div>

                        <!-- Start Product-Slider -->
                        <div class="col-12">
                            <div class="product-carousel carousel-lg owl-carousel owl-theme">
                                {% for i in new %}
                                <div class="item">
                                    <div class="product-card mb-3">
                                        <div class="product-head">
                                            <div class="rating-stars">
                                                <i class="mdi mdi-star active"></i>
                                                <i class="mdi mdi-star active"></i>
                                                <i class="mdi mdi-star active"></i>
                                                <i class="mdi mdi-star active"></i>
                                                <i class="mdi mdi-star"></i>
                                            </div>
                                        </div>
                                        <a class="product-thumb" href="shop-single.html">
                                            <img src="{% static 'assets/img/products/019.jpg' %}" alt="Product Thumbnail">
                                        </a>
                                        <div class="product-card-body">
                                            <h5 class="product-title">
                                                <a href="shop-single.html">{{i.name}}</a>
                                            </h5>
                                            <a class="product-meta" href="shop-categories.html">لباس مردانه</a>
                                            <span class="product-price">54,000 تومان</span>
                                        </div>
                                    </div>
                                </div>
                                                            {% endfor %}

                            </div>
                        </div>
                        <!-- End Product-Slider -->

                    </div>
                </section>
                <!-- End Product-Slider -->
            </div>
        </main>
{% extends "base.html" %}
{% load humanize %}
{% load static %}
{% block content %}
{% if messages %}
<ul class="messages">
  {% for message in messages %}
    <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
  {% endfor %}
</ul>
{% endif %}

   <div class="container">
        <div class="row mt-5">
            <div class="col-md-6 col-sm-12  mb-3 mb-sm-0">
                <div class="card mb-3" style="background-color: ;">
                    <div class="card-body">
                        <!-- <img id="third-card-img" src="img/2.png" class="card-img-top"> -->
                        <!-- <button class="">example</button> -->
                        <div id="carouselExampleCaptions" class="carousel slide">
                            <div class="carousel-indicators">
                              <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                              <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="1" aria-label="Slide 2"></button>
                              <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="2" aria-label="Slide 3"></button>
                            </div>
                            <div class="carousel-inner">
                            {% for i in object.image %}
                              <div class="carousel-item active">
                                <img id="img-2" src="{{i.image.url}}" class="d-block w-75 center conter.center" alt="...">
                                <div class="carousel-caption d-none d-md-block">

                                </div>
                              </div>
                              {% endfor %}
                            </div>
                            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="prev">
                              <span class="carousel-control-prev-icon" style="background-color: black;" aria-hidden="true"></span>
                              <span class="visually-hidden">Previous</span>
                            </button>
                            <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="next">
                              <span class="carousel-control-next-icon" style="background-color: black;" aria-hidden="true"></span>
                              <span class="visually-hidden">Next</span>
                            </button>
                          </div>
                    </div>
                  </div>
            </div>
            <div class="col-md-3 col-sm-12 mb-3 mb-sm-0">
                <div class="card" style="background-color: #ffffff; border:none;">
                    <div class="card-body">
                      
                      <p>
                        {{product.title}}
                      </p>
                      {% for key,value in product.data.items %}
                      <p>
                        {{key}} {{value}}
                        
                      </p>
                      {% endfor %}
                      <!-- <p>
                        سایز 6.7 اینچ
                      </p>
                        <p>رنگ مشکی</p>
                        <p>
                         -->
                          قیمت {{product.price|intcomma}} تومان
                        </p>
                        {% if user.is_authenticated %}
                        <form action="{% url 'cart:add' product.id %}" method="post">
                        {% csrf_token %}
                          <label for="contnet">تعداد:</label><br>
                           <input type="number" id="quantity" name="quantity" value="1" data-value="1" max="10"><br><br>
                        <button type="submit" class="btn btn-success" style="background-color:#633EF8;">
                          اضافه کردن به سبد
                        </button>
                        </form>
                        {% else %}
                        <a href="{% url 'register_view' %}" target="_blank">
                        <button type="submit" class="btn btn-success" style="background-color:#633EF8;">
                          لاکین کنید
                        </button></a>
                        {% endif %}
                    </div>
                  </div>








                                <div class="row">
                                    <h2>قیمت : <span class="price">{{variant.price}} تومان</span> </h2>

                                    {% if product.variant == 'Color' %}
                                        <form method="post" action="?q=selectvariant" id="post-color">
                                            {% csrf_token %}
                                            <div id="appendHere">
                                                <input type="hidden" name="size" id="size" value="{{ size_id }}">
                                                   <ul class="color-option" >
                                                        <li><span class="text-uppercase"></span></li>
                                                        {% for rs in colors %}

                                                            <input type="radio"  {% if variant.id == rs.id %} checked {% endif %} name="variantid" id="variantid" value="{{ rs.id }}" onchange="this.form.submit();">
                                                        <li class="ui-variant">
                                                            <label class="ui-variant ui-variant--color">
                                                                <span class="ui-variant-shape" style="background-color: {{ rs.color.code }}"></span>
                                                                    <input type="radio"{% if variant.id == rs.id %} checked {% endif %} name="variantid" id="variantid" value="{{ rs.id }}" onchange="this.form.submit();">

                                                                <span class="ui-variant--check">{{rs.color.name}}</span>
                                                            </label>
                                                        </li>
                                                            </li>
                                                        {% endfor %}
                                                    </ul>
                                                </div>
                                        </form>
                                        </div>
                                    {% endif %}























            </div>
            <div class="col-md-3 col-sm-12 mb-3 mb-sm-0">
              <div class="card mb-3" style="background-color: #ffffff;">
                <div class="card-body text-center">
                  <p>برچسب رضایت</p>
                  <p>محدوده قیمت بازار برای این جنس</p>
                  <p>تهران: 13,300,000 ریال </p>
                  <p>میزان رضایت شما از قیمت</p>   
                  <p>تعداد رای: 1200</p>
                  <p>ایا از قیمت کالا رضایت دارید؟</p>    
                  </div>
                  </div>
            </div>
        </div>
    </div>


    <!-- information about product -->
    <div class="container">
      <div class="row">
        <div class="col-12">
          <div class="card">
            <div class="card-body">
              <h3 class="text-center">
                {{product.title}}
              </h3>
              <p>
              {{product.description}}
              </p>
        
              <img id="img-2" src="{{product.image.url}}" class="d-block w-25 center conter.center" alt="...">


              <div class="container">
                <div class="row">
                  
                  <p class="d-inline-flex gap-1">
                    <button class="btn btn-primary" type="button" data-bs-toggle="collapse" data-bs-target=".multi-collapse" aria-expanded="false" aria-controls="multiCollapseExample1 multiCollapseExample2">مشخصات فنی</button>
                  </p>
                  <div class="row">
                    <div class="col">
                      <div class="collapse multi-collapse" id="multiCollapseExample1">
                        <div class="card card-body">
                          <p>رم: 16</p><hr>
                          <p>رم: 16</p><hr>
                          <p>رم: 16</p><hr>
                          <p>رم: 16</p><hr>
                          <p>رم: 16</p><hr>
                        </div>
                      </div>
                    </div>
                    <div class="col">
                      <div class="collapse multi-collapse" id="multiCollapseExample2">
                        <div class="card card-body">
                          <p>صفحه نمایشگر 6</p><hr>
                          <p>صفحه نمایشگر 6</p><hr>
                          <p>صفحه نمایشگر 6</p><hr>
                          <p>صفحه نمایشگر 6</p><hr>
                          <p>صفحه نمایشگر 6</p><hr>

                        </div>
                      </div>
                    </div>
                  </div>
              
                </div>
            
              </div>


            </div>
          </div>
        </div>
      </div>
    </div>






    <!-- commnet -->
    <div class="container">
      <div class="row">
        <div class="col-12">
          <div class="card p-5">


        
      <h1 class="text-center mt-4">ثبت نظرات و پیشنهادات</h1>
  {% if user.is_authenticated %}
    <form action="{% url 'comment:create-comment' product.id %}" method="POST">
      {% csrf_token %}
        <div class="mb-3">
          <label for="contnet" id="content" name="content" class="form-label">متن</label>
          <input type="text" class="form-control" id="contnet" name="content">
        </div>
        <button type="submit" class="btn btn-primary">ثبت</button>
      </form>
      {% else %}
      <a href="{% url 'register_view' %}" target="_blank" class="text-center">
      <button type="submit" class="btn btn-primary mb-3 mt-3">برای ثبت نظر خود وارد حساب کاربری شوید</button></a>
  
      {% endif %}

    <div class="row">
      {% if object.comment == "کامنتی وجود ندارد" %}
      <h3 class="text-center">کامنتی نیست</h3>
      {% else %}
      {% for i in object.comment %}
    <div class="col-lg-4 col-sm-6 mb-3 mb-sm-0">
      <div class="card mt-3">
        
          <!-- <img id="top-card-img" src="img/b.jpg" class="card-img-top" alt="..."> -->
          <div class="card-body">
              <p class="text-muted text-center">جواد حسین زاده</p>
              <p class="text-center">{{i.content}}</p>

          </div>
      </div>
  </div>
    {% endfor %}
    {% endif %}
  </div>
</div>
        </div>

      </div>
    </div>
  </div>


  


    <!-- text about product -->



    <!-- products -->
    <div class="container mt-5">
      <div class="row">
      {% for product in object.product %}
      
          <div class="col-lg-3 col-md-6 col-sm-6 mb-3 mb-sm-0">
            <a href="{% url "shop:detail" product.id %}" style="text-decoration: none;">

              <div id="top-card" class="card" >
                  <img id="top-card-img" src="{{product.image.url}}" class="card-img-top" alt="...">
                  <div class="card-body">
                    <p>{{product.title|truncatewords:5}}</p>
                    <script>
                        function ToRial(str) {
                        
                        str = str.replace(/\,/g, '');
                            var objRegex = new RegExp('(-?[0-9]+)([0-9]{3})');
                          
                            while (objRegex.test(str)) {
                                str = str.replace(objRegex, '$1,$2');
                            }
                          
                            return str;
                        }
                        //discount
                      var int_price ={{product.price}} - {{product.calculate_discount}};
                      var str_price = int_price.toString()
                      var price = ToRial(str_price)

                      //price
                      var p = {{product.price}}
                      var t = p.toString()
                      console.log(t)
                      var price1 = ToRial(t)
            
                  </script>
                  {% if product.discount > 0 %}
                      <p class="text-muted text-center"><script type="text/javascript">document.write(price)</script> تومان  <span style="color: #ff3e3e; text-decoration:line-through;"><script type="text/javascript">document.write(price1)</script></span></p>
                      <p class="text-center mb-3">{{product.discount}} آفر جی پلاس</p>
                  <!-- {{product.discount}} -->
                  {% else %}
                  <p class="text-muted text-center"><script type="text/javascript">document.write(price)</script> تومان </p>
                  {% endif %}
                  </div>
              </div>
              </a>
          </div>
      {% endfor %}
      </div>
  </div>




                                    <script>
                                $(document).on('change', '#post-form',function(e){
                                    e.preventDefault();
                                    $.ajax({
                                        type:'POST',
                                        url:'{% url "ajaxcolor" %}',
                                        data:{
                                            productid:$('#productid').val(),
                                            size:$('#size').val(),
                                            csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val(),
                                            action: 'post'
                                        },
                                        data_type : 'html',
                                        success: function (data) {
                                            console.log("success");
                                            $('#appendHere').html(data.rendered_table);
                                        },
                                        error: function (data) {
                                            alert("Got an error dude " + data);
                                        }
                                    });
                                });
                            </script>
{% endblock %}
